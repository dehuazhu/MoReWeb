<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>MORE-Web changelog</title>
	</head>

	<body>
	<h1>MoReWeb changelog</h1>
	last updated: May 19, 2016

	<h2>v1.0.0 - DB reprocessing</h2>
 	<ul>
		<li>made for DB reprocessing with <b>final grading</b></li>
		<li><b>fix:</b> sometimes missing plots in Fulltest</li>
		<li><b>fix:</b> exceptions for some cases with incomplete data</li>
		<li>plot labels corrected, plot axis set to fixed in some x-ray tests</li>
		<li>exit code 404 if no data to analyze has been found (for global DB!)</li>
	</ul>

	<h2>v0.7.2</h2>
    <ul>
		<li><b>fix:</b> defective pixel counts in performance parameters dictionary were -1</li>
		<li><b>fix:</b> remove dependence on <b>numpy</b> module</li>
		<li>navigation on chip result pages between different chips with left/right arrow keys</li>
		<li>BB2 test for baremodules</li>
		<li>additional <b>experimental cut for Fulltest BumpBonding test, not used for grading!</b> and only displayed on the chip pages as dash-dotted green line.</li>
		<li><b>defects.txt</b> can be placed in test directories to manually grade a module C and additionally specify a machine readable defect type. Modules are then listed together with modules, for which the defect has been found in automatic test analysis. This <b>can</b> be used to replace grade.txt. Possible values are:
		<ul>
			<li>LeakageCurrentPON</li>
			<li>LeakageCurrentFQ</li>
			<li>NotProgrammable</li>
			<li>DeadROC</li>
			<li>FulltestPixelDefects</li>
			<li>FulltestPerformance</li>
			<li>XrayPixelDefects</li>
			<li>XrayDoubleColumnDefects</li>
			<li>XrayEfficiency</li>
			<li>XrayPerformance</li>
			<li>... or any other defect which will then create a new category</li>
		</ul>
		<li>add logfile view to reception test</li>
		<li>speed-up linear PH fitting and Scurve fitting</li>
		</li>
	</ul>

	<h2>v0.7.0</h2>
	<h3>Grading</h3>
	<h4>FullQualification</h4>
	<ul>
		<li>FullQualification Noise grading: 500/1000 to 200/300</li>
		<li>Exclude threshold defects from Gain and p1 defects</li>
	</ul>
	<h4>X-ray</h4>
	<ul>
		<li>Grade 'C' for bad double coulmns (1 percent or more inefficient pixels)</li>
		<li>Exclude bad double columns in efficiency fit</li>
		<li>Noise: criteria for mean noise 300/400</li>
	</ul>

	<h3>Features</h3>
	<ul>
		<li>Improved PresentationMaker and Production Overview generation</li>
		<li>Readback parameters plot shown on Fulltest/ROC pages</li>
		<li>Reception tests can be analyzed</li>
		<li>Speed-up of analysis of FQ (without fit) takes 45 % less time now</li>
		<li>Analysis of single tests:</li>
		<ul>
			<li><strong>PixelAlive</strong>: PixelAlive map per module and per chip</li>
			<li><strong>ReadbackCal</strong>: ReadbackParameters table and plots per chip</li>
		</ul>
	</ul>	

	<h2>v0.6.8 - DB reprocessing</h2>
	<ul>
		<li>Incomplete/broken/fake test data for not testable modules can now be uploaded to the Pisa DB. HTML pages show more explicitly which tests were missing in the full Qualification</li>
		<li>LeakageCurrentPON tests can now be uploaded.</li>
	</ul>


	<h2>v0.6.7</h2>
	<strong>v0.6.7-12</strong>: fix bug with not found IV curve files if qualifications with different directory structures are analyzed in one go
	<ul>
		<li>IV grading: also grade on measured value of leakage current at -20 degrees with the same criteria than at +17. <strong>This will affect grading of modules that have both a higher leakage current at -20 than at +17 and a leakage current at -20 larger than 10 uA.</strong><br></li>
		<li>show fulltest logfile at HTML on results page</li>
		<li>in the module qualifications list, the test center can be shown with parameter --show-test-center</li>
	</ul>


	<h2>v0.6.6</h2>
	<ul>
		<li>add possibility to place a file containing the grade into each fulltest/x-ray hr subfolder to manually change grade. (comments can be placed in the main folder in a file called comments.txt)</li>
	</ul>

	<h2>v0.6.4</h2>
	<ul>
		<li>modified IV grading which takes I(+17)/I(-20) at 150V into account. If IV at -20 is not available, ratio grading is skipped.</li>
		<li>adds Iana loss test to Fulltest analysis</li>
		<li>adds readout error statistics to x-ray HR tests</li>
	</ul>

	<h2>v0.6.3</h2>
	<h4>New features</h4>
	<ul>
		<li>adds upload of HR test results to global DB</li>
	</ul>

	<h3>Bug fixes</h3>

	<h4>Fitting</h4>
	<ul>
		<li>fixed detection of saturated PH for problematic ROCs which saturate at 254</li>
	</ul>
	<h4>Fulltest analysis</h4>
	<ul>
		<li>fix problems of wrong DAC parameters displayed and trim vcal used for defects grading if dacParameter files or file date were modified after test</li>
	</ul>

	<h2>v0.6.2</h2>
	This version reduces the total size of output folders in FinalResults by more than 50% for both X-ray and FullQualification.
	<h4>General changes</h4>
	<ul>
		<li>
			use png for chip maps to reduce file sizes
		</li>
	</ul>

	<h2>v0.6.1</h2>
	<h3>New Features</h3>
	<h4>Fulltest analysis</h4>
	<ul>
		<li>
			add BB2 test
		</li>
	</ul>

	<h2>v0.6.0</h2>
	This list should give an overview of new features and bugfixes from the last few months, but is not complete.
	<h3>New Features</h3>

	<h4>Fulltest analysis</h4>
	<ul>
		<li>
			new grading implemented
		</li>
		<li>
			fit Vcal threshold with Gaussian instead of taking RMS
		</li>
		<li>
			show separate IV and electrical grades
		</li>
		<li>
			readback calibration results added
		</li>
		<li>
			improve ROC summary table, include grades, performance parameters and reason of degrading
		</li>
		<li>
			add new boxes for TBM parameters
		</li>
		<li>
			r/o errors and criticals counting added
		</li>
		<li>
			display analysis date, MoReWeb version and branch
		</li>
		<li>
			display changes of GradingParameters.cfg wrt GradingParameters.cfg.default in FT summary
		</li>
		<li>
			show a more verbose summary of ROC pixel defects in the logfile and also a fulltest summary in the end including grades
		</li>
		<li>
			include BB4 test, if BB4 and BB test are both present, BB4 has priority
		</li>
		<li>
			include 'tornado' plot
		</li>
	</ul>
	<h4>X-ray HR tests</h4>
	<ul>
		<li>
			analysis of HR tests has been implemented, including			
			<ul>
				<li>efficiency maps and interpolation</li>
				<li>hitmaps to check for missing bump bonds</li>
				<li>readout uniformity</li>
				<li>double column uniformity</li>
				<li>SCurves under X-rays</li>
			</ul>
		</li>
	</ul>
	<h4>Vcal calibration</h4>
	<ul>
		<li>
			improve fit of spectra with a large backgroun with <i>SpectrumFitImproveInitialGuess</i> and <i>SpectrumFitAdditionalConstraints</i> options
		</li>
		<li>
			improve fit of PH vs Vcal line with <i>LinearFitAdditionalConstraints</i> option
		</li>
		<li>
			display module hitmap and hits per pixel distribution on vcal calibration page
		</li>
	</ul>
	<h4>Leakage current at startup test</h4>
	<ul>
		<li>
			added LeakageCurrentPON test analysis
		</li>
	</ul>	
	<h4>Production overview page</h4>
	<ul>
		<li>
			an overview page of tested modules can be produced with <strong>./Controller.py -p</strong>, including:
			<ul>
				<li>total and weekly grading summary</li>
				<li>cumulative plot of tested modules</li>
				<li>distribution of ROC performance parameters like RelativeGainWidth, Noise, PedestalSpread etc.</li>
				<li>distribution of pixel parameters like Gain, Noise, Threshold etc.</li>
				<li>distribution of DAC parameters and sensor properties</li>
				<li>module failure overview which shows reason for degrading</li>
			</ul>
		</li>
	</ul>
	<h4>General features</h4>
	<ul>
		<li>
			several improvements for analysis of large amounts of data
		</li>
		<ul>
			<li>
				improved exception handling, errors in one qualification folder should not stop analysis of other folders but just skip this folder
			</li>
			<li>
				show progress of analysis
			</li>
		</ul>
		<li>
			added &quot;-r&quot; parameter to force re-fitting of SCurve and PH data
		</li>
		<li>
			parallelization of fitting: in the SystemConfiguration <i>ParallelProcessing = 1</i> can be set to enable parallel fitting, <i>LimitProcesses</i> can be used to limit number of threads
		</li>
		<li>
			if fulltests fail, an empty row with grade C is written to database instead of writing nothing
		</li>
		<li>
			removed not used or constant column from qualification overview page
		</li>
		<li>
			denote which fit function is used if fit curve is displayed in histogram
		</li>
		<li>
			improved pXar/pyxar software detection
		</li>
		<li>
			add analysis date to overview page
		</li>
		<li>
			option to sort the qualification list
		</li>
	</ul>

	<h2>Bug fixes</h2>

	<h3>Grading</h3>
	<ul>
		<li>fixed bug through which many pixel defects were not leading to a degrading above the intended value</li>
		<li>fixed double counting of pixel defects (maily due to dead pixels)</li>
		<li>threshold defects are now properly counted</li>
	</ul>

	<h3>Analysis</h3>
	<ul>
		<li>fixed white pixels that appeared in vcal threshold map</li>
		<li>fixed bug which caused linear PH fit to fail sometimes leading to Gain defects</li>
		<li>fixed bug where hitmaps for all targets were the same in vcal calibration</li>
		<li>fixed 'ignore least significant trimbit' option in TrimBits test</li>
		<li>fixed bugs where mean values were nan because they included nan's</li>
	</ul>

	<h3>General</h3>
	<ul>
		<li>fixed crashes due to exceeding max number of open file handles if analyzing many folders at once</li>
		<li>exception handling of wrong directory structure, wrong folder names, missing .ini files ...</li>
		<li>exception handling of bad modules, especially dead ROCs or double columns</li>
		<li>fixed serialization of json files</li>
		<li>fixed bug which on qualifications overview page did not display the max number of pixel defects from the fulltests</li>
		<li>fixed bug with not correctly displayed times (month instead of minutes)</li>
	</ul>


	</body>
</html>